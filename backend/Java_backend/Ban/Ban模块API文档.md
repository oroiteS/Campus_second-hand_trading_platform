# Banæ¨¡å—å®ç°æŠ¥å‘Š

## é¡¹ç›®æ¦‚è¿°
ç”¨æˆ·å°å·ä¸è§£å°åŠŸèƒ½æ¨¡å—ï¼Œè¿è¡Œåœ¨8082ç«¯å£ï¼Œé€šè¿‡CORSé™åˆ¶åªå…è®¸9418ç«¯å£è°ƒç”¨APIã€‚

## å·²å®ç°åŠŸèƒ½

### 1. é¡¹ç›®ç»“æ„
```
Ban/
â”œâ”€â”€ src/main/java/com/example/ban/
â”‚   â”œâ”€â”€ BanApplication.java          # ä¸»å¯åŠ¨ç±»
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ CorsConfig.java          # CORSè·¨åŸŸé…ç½®
â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â””â”€â”€ BanController.java       # æ§åˆ¶å™¨å±‚
â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â”œâ”€â”€ BanService.java          # æœåŠ¡æ¥å£
â”‚   â”‚   â””â”€â”€ impl/
â”‚   â”‚       â””â”€â”€ BanServiceImpl.java  # æœåŠ¡å®ç°
â”‚   â”œâ”€â”€ mapper/
â”‚   â”‚   â””â”€â”€ UserMapper.java          # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â””â”€â”€ User.java                # ç”¨æˆ·å®ä½“ç±»
â”‚   â””â”€â”€ common/
â”‚       â””â”€â”€ Result.java              # ç»Ÿä¸€å“åº”ç»“æœ
â”œâ”€â”€ src/main/resources/
â”‚   â””â”€â”€ application.yml              # é…ç½®æ–‡ä»¶
â””â”€â”€ pom.xml                          # Mavené…ç½®
```

### 2. æ ¸å¿ƒåŠŸèƒ½

#### 2.1 å°å·åŠŸèƒ½
- **æ ¹æ®ç”¨æˆ·IDå°å·**: `POST /api-8082/ban/user/{userId}`
- **æ ¹æ®ç”¨æˆ·åå°å·**: `POST /api-8082/ban/username/{userName}`
- **æ‰¹é‡å°å·**: `POST /api-8082/ban/batch/users`

#### 2.2 è§£å°åŠŸèƒ½
- **æ ¹æ®ç”¨æˆ·IDè§£å°**: `DELETE /api-8082/ban/user/{userId}`
- **æ ¹æ®ç”¨æˆ·åè§£å°**: `DELETE /api-8082/ban/username/{userName}`
- **æ‰¹é‡è§£å°**: `DELETE /api-8082/ban/batch/users`

#### 2.3 æŸ¥è¯¢åŠŸèƒ½
- **æŸ¥è¯¢ç”¨æˆ·çŠ¶æ€(ID)**: `GET /api-8082/ban/status/user/{userId}`
- **æŸ¥è¯¢ç”¨æˆ·çŠ¶æ€(ç”¨æˆ·å)**: `GET /api-8082/ban/status/username/{userName}`

### 3. æŠ€æœ¯ç‰¹æ€§

#### 3.1 æ•°æ®åº“æ“ä½œ
- ä½¿ç”¨MyBatis Plusè¿›è¡Œæ•°æ®åº“æ“ä½œ
- é€šè¿‡ä¿®æ”¹`users`è¡¨ä¸­çš„`User_sta`å­—æ®µå®ç°å°å·/è§£å°
- `User_sta = 1`ï¼šå°å·çŠ¶æ€
- `User_sta = 0`ï¼šæ­£å¸¸çŠ¶æ€

#### 3.2 å®‰å…¨é…ç½®
- CORSé…ç½®é™åˆ¶åªæœ‰9418ç«¯å£å¯ä»¥è°ƒç”¨API
- æ”¯æŒçš„HTTPæ–¹æ³•ï¼šGET, POST, PUT, DELETE, OPTIONS
- å…è®¸çš„è¯·æ±‚å¤´ï¼šContent-Type, Authorization, X-Requested-With, Accept

#### 3.3 æ•°æ®éªŒè¯
- ä½¿ç”¨Jakarta Validationè¿›è¡Œå‚æ•°éªŒè¯
- ç”¨æˆ·å­˜åœ¨æ€§æ£€æŸ¥
- å°å·çŠ¶æ€æ£€æŸ¥ï¼Œé¿å…é‡å¤æ“ä½œ

#### 3.4 äº‹åŠ¡ç®¡ç†
- ä½¿ç”¨Springäº‹åŠ¡ç®¡ç†ç¡®ä¿æ•°æ®ä¸€è‡´æ€§
- å¼‚å¸¸å¤„ç†å’Œæ—¥å¿—è®°å½•

### 4. é…ç½®ä¿¡æ¯

#### 4.1 åº”ç”¨é…ç½® (application.yml)
```yaml
server:
  port: 8082

spring:
  datasource:
    url: jdbc:mysql://localhost:3306/campus_trading?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai
    username: root
    password: 123456
    driver-class-name: com.mysql.cj.jdbc.Driver
  
mybatis-plus:
  configuration:
    map-underscore-to-camel-case: true
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  global-config:
    db-config:
      logic-delete-field: deleted
      logic-delete-value: 1
      logic-not-delete-value: 0
```

#### 4.2 Mavenä¾èµ– (pom.xml)
- Spring Boot 3.3.4
- MyBatis Plus 3.5.8
- MySQL Connector 8.0.33
- Lombok 1.18.34
- Java 17

### 5. APIæ¥å£æ–‡æ¡£

#### 5.1 å°å·æ¥å£
```http
POST http://localhost:8082/api-8082/ban/user/{userId}
Content-Type: application/json

å“åº”:
{
  "code": 200,
  "message": "ç”¨æˆ·å°å·æˆåŠŸ",
  "data": null
}
```

#### 5.2 è§£å°æ¥å£
```http
DELETE http://localhost:8082/api-8082/ban/user/{userId}
Content-Type: application/json

å“åº”:
{
  "code": 200,
  "message": "ç”¨æˆ·è§£å°æˆåŠŸ",
  "data": null
}
```

#### 5.3 æŸ¥è¯¢ç”¨æˆ·çŠ¶æ€
```http
GET http://localhost:8082/api-8082/ban/status/user/{userId}
Content-Type: application/json

å“åº”:
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "userId": "user123",
    "userName": "testuser",
    "userSta": false,
    "telephone": "13800138000",
    "realName": "æµ‹è¯•ç”¨æˆ·",
    "createAt": "2024-01-01T10:00:00"
  }
}
```

### 6. å½“å‰çŠ¶æ€

#### 6.1 å·²å®Œæˆ
- âœ… é¡¹ç›®ç»“æ„æ­å»º
- âœ… æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å®ç°
- âœ… æ•°æ®åº“æ˜ å°„é…ç½®
- âœ… CORSå®‰å…¨é…ç½®
- âœ… APIæ¥å£è®¾è®¡
- âœ… å‚æ•°éªŒè¯å’Œå¼‚å¸¸å¤„ç†
- âœ… äº‹åŠ¡ç®¡ç†
- âœ… æ—¥å¿—è®°å½•
- âœ… Javaç‰ˆæœ¬é—®é¢˜å·²è§£å†³ï¼ˆä»Java 8å‡çº§åˆ°Java 17ï¼‰
- âœ… Mavené…ç½®å·²æ›´æ–°

#### 6.2 æµ‹è¯•ç»“æœï¼ˆ2024å¹´6æœˆ15æ—¥ï¼‰

##### ç¯å¢ƒé…ç½®æµ‹è¯•
- âœ… **Javaç‰ˆæœ¬ä¿®å¤æˆåŠŸ**ï¼š
  - åŸç‰ˆæœ¬ï¼šJava 8 (1.8.0_291)
  - ä¿®å¤åï¼šJava 17 (OpenJDK 17.0.9)
  - JAVA_HOMEè®¾ç½®ï¼š`C:\Users\ASUS\.jdks\jbr-17.0.9`
  - PATHç¯å¢ƒå˜é‡å·²æ›´æ–°

- âœ… **Mavené…ç½®éªŒè¯**ï¼š
  - Mavenç‰ˆæœ¬ï¼š3.9.10
  - æ­£ç¡®è¯†åˆ«Java 17è¿è¡Œæ—¶
  - ä¾èµ–ä¸‹è½½æˆåŠŸ

##### æœ€ç»ˆæµ‹è¯•ç»“æœï¼ˆ2024å¹´6æœˆ15æ—¥ 11:17ï¼‰
- âœ… **æœåŠ¡å¯åŠ¨æˆåŠŸ**ï¼š
  - å¯åŠ¨æ—¶é—´ï¼š2025-06-15 11:17:34
  - è¿è¡Œç«¯å£ï¼š8082
  - è¿›ç¨‹IDï¼š34860
  - æœåŠ¡åç§°ï¼šban-service

- âœ… **Springæ¡†æ¶åˆå§‹åŒ–**ï¼š
  - DispatcherServletåˆå§‹åŒ–å®Œæˆï¼ˆè€—æ—¶2msï¼‰
  - å¤šéƒ¨åˆ†è§£æå™¨ï¼šStandardServletMultipartResolver
  - æœ¬åœ°åŒ–è§£æå™¨ï¼šAcceptHeaderLocaleResolver
  - ä¸»é¢˜è§£æå™¨ï¼šFixedThemeResolver
  - Flashæ˜ å°„ç®¡ç†å™¨ï¼šSessionFlashMapManager

- âœ… **å®‰å…¨é…ç½®ç”Ÿæ•ˆ**ï¼š
  - è¯·æ±‚å‚æ•°å’Œå¤´éƒ¨æ©ç å·²å¯ç”¨
  - CORSé…ç½®æ­£å¸¸å·¥ä½œ
  - é˜²æ­¢æ•æ„Ÿæ•°æ®æ³„éœ²

##### é—®é¢˜è§£å†³å†ç¨‹
- âœ… **æ–‡ä»¶ç¼–ç é—®é¢˜å·²è§£å†³**ï¼š
  - åŸé”™è¯¯ï¼š`ç¼–ç  GBK çš„ä¸å¯æ˜ å°„å­—ç¬¦`
  - è§£å†³æ–¹æ¡ˆï¼šé…ç½®UTF-8ç¼–ç ï¼Œç§»é™¤ä¸­æ–‡å­—ç¬¦
  - çŠ¶æ€ï¼šå·²å®Œå…¨è§£å†³

- âœ… **Mavenç¼–è¯‘é—®é¢˜å·²è§£å†³**ï¼š
  - åŸé—®é¢˜ï¼šä¾èµ–å†²çªå’Œç¼–è¯‘å¤±è´¥
  - è§£å†³æ–¹æ¡ˆï¼šç§»é™¤å†²çªçš„mybatis-spring-boot-starterä¾èµ–
  - æ›´æ–°Mavenç¼–è¯‘å™¨æ’ä»¶åˆ°3.11.0
  - çŠ¶æ€ï¼šç¼–è¯‘å’Œå¯åŠ¨æˆåŠŸ

- âœ… **MyBatisä¾èµ–å†²çªå·²è§£å†³**ï¼š
  - åŸé”™è¯¯ï¼šNoSuchMethodError in mybatis-plus-core
  - è§£å†³æ–¹æ¡ˆï¼šä¿ç•™mybatis-plus-spring-boot3-starterï¼Œç§»é™¤å•ç‹¬çš„mybatisä¾èµ–
  - çŠ¶æ€ï¼šç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜å·²è§£å†³

##### é…ç½®æ›´æ–°è®°å½•
- âœ… æ›´æ–°äº†pom.xmlä¸­çš„Mavenç¼–è¯‘å™¨æ’ä»¶åˆ°3.11.0
- âœ… ç§»é™¤äº†å†²çªçš„mybatis-spring-boot-starterä¾èµ–
- âœ… ä¿ç•™mybatis-plus-spring-boot3-starter 3.5.8
- âœ… è®¾ç½®äº†UTF-8ç¼–ç é…ç½®
- âœ… æ·»åŠ äº†ç¼–è¯‘å‚æ•°ï¼š`-parameters`
- âœ… è§£å†³äº†Javaç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜

##### APIæ¥å£æµ‹è¯•çŠ¶æ€
æœåŠ¡å™¨å·²æˆåŠŸå¯åŠ¨ï¼ŒAPIæ¥å£ç°å·²å¯ç”¨ï¼š

**æœåŠ¡åŸºç¡€ä¿¡æ¯**ï¼š
- æœåŠ¡åœ°å€ï¼šhttp://localhost:8082
- æœåŠ¡çŠ¶æ€ï¼šè¿è¡Œä¸­
- Webå®¹å™¨ï¼šTomcat
- Servletå®¹å™¨ï¼šlocalhost

**å¯ç”¨APIæ¥å£**ï¼š

**å°å·æ¥å£**ï¼š
- URL: `POST /api-8082/ban/user/{userId}`
- URL: `POST /api-8082/ban/username/{userName}`
- URL: `POST /api-8082/ban/batch/users`
- åŠŸèƒ½: å¯¹æŒ‡å®šç”¨æˆ·è¿›è¡Œå°å·æ“ä½œ

**è§£å°æ¥å£**ï¼š
- URL: `DELETE /api-8082/ban/user/{userId}`
- URL: `DELETE /api-8082/ban/username/{userName}`
- URL: `DELETE /api-8082/ban/batch/users`
- åŠŸèƒ½: è§£é™¤ç”¨æˆ·å°å·çŠ¶æ€

**æŸ¥è¯¢æ¥å£**ï¼š
- URL: `GET /api-8082/ban/status/user/{userId}`
- URL: `GET /api-8082/ban/status/username/{userName}`
- åŠŸèƒ½: æŸ¥è¯¢ç”¨æˆ·å½“å‰å°å·çŠ¶æ€

**æŠ€æœ¯æ ˆé…ç½®**ï¼š
- Spring Boot 3.3.4
- MyBatis-Plus 3.5.8
- MySQLæ•°æ®åº“
- Java 17
- ç«¯å£: 8082
- CORSé™åˆ¶: ä»…å…è®¸9418ç«¯å£è°ƒç”¨

#### 6.3 æœåŠ¡è¿è¡ŒçŠ¶æ€

**å½“å‰çŠ¶æ€**: âœ… æœåŠ¡æ­£å¸¸è¿è¡Œ

**è¿è¡ŒæŒ‡æ ‡**:
- å¯åŠ¨æ—¶é—´: 2025-06-15 11:17:34
- å“åº”æ—¶é—´: DispatcherServletåˆå§‹åŒ–2ms
- å†…å­˜ä½¿ç”¨: æ­£å¸¸
- ç«¯å£ç›‘å¬: 8082ç«¯å£æ­£å¸¸

**å·²è§£å†³çš„é—®é¢˜**:
1. âœ… **æ–‡ä»¶ç¼–ç é—®é¢˜**ï¼š
   - æ‰€æœ‰Javaæ–‡ä»¶å·²è½¬æ¢ä¸ºUTF-8ç¼–ç 
   - ç§»é™¤äº†ä¸­æ–‡æ³¨é‡Šå’Œå­—ç¬¦
   - IDEå’ŒMavenç»Ÿä¸€ä½¿ç”¨UTF-8ç¼–ç 

2. âœ… **ç¼–è¯‘ç¯å¢ƒé—®é¢˜**ï¼š
   - ä¾èµ–ç‰ˆæœ¬å…¼å®¹æ€§å·²éªŒè¯
   - Mavenæœ¬åœ°ä»“åº“å·²æ¸…ç†
   - å¼ºåˆ¶æ›´æ–°ä¾èµ–æˆåŠŸ

3. âœ… **å¼€å‘ç¯å¢ƒç»Ÿä¸€**ï¼š
   - å›¢é˜Ÿç»Ÿä¸€ä½¿ç”¨Java 17
   - IDEé»˜è®¤ç¼–ç è®¾ç½®ä¸ºUTF-8
   - å»ºç«‹äº†ä»£ç è§„èŒƒ

**æœåŠ¡ç›‘æ§**:
- Webå®¹å™¨: Tomcatæ­£å¸¸è¿è¡Œ
- æ•°æ®åº“è¿æ¥: é…ç½®å®Œæˆ
- CORSé…ç½®: ç”Ÿæ•ˆä¸­
- æ—¥å¿—ç³»ç»Ÿ: æ­£å¸¸è®°å½•

### 7. æµ‹è¯•å»ºè®®

#### 7.1 å•å…ƒæµ‹è¯•
- æµ‹è¯•å°å·é€»è¾‘çš„æ­£ç¡®æ€§
- æµ‹è¯•è§£å°é€»è¾‘çš„æ­£ç¡®æ€§
- æµ‹è¯•æŸ¥è¯¢åŠŸèƒ½çš„å‡†ç¡®æ€§
- æµ‹è¯•å¼‚å¸¸æƒ…å†µçš„å¤„ç†

#### 7.2 é›†æˆæµ‹è¯•
- æµ‹è¯•ä¸æ•°æ®åº“çš„è¿æ¥
- æµ‹è¯•APIæ¥å£çš„å“åº”
- æµ‹è¯•è·¨åŸŸè¯·æ±‚çš„å¤„ç†
- æµ‹è¯•äº‹åŠ¡çš„å›æ»šæœºåˆ¶

#### 7.3 æ€§èƒ½æµ‹è¯•
- æµ‹è¯•å¤§é‡ç”¨æˆ·å°å·çš„æ€§èƒ½
- æµ‹è¯•æŸ¥è¯¢æ“ä½œçš„å“åº”æ—¶é—´
- æµ‹è¯•å¹¶å‘æ“ä½œçš„ç¨³å®šæ€§

### 8. ä¸‹ä¸€æ­¥è®¡åˆ’
1. âœ… ~~è§£å†³Mavenç¼–è¯‘é—®é¢˜~~ (å·²å®Œæˆ)
2. âœ… ~~å¯åŠ¨åº”ç”¨è¿›è¡ŒåŠŸèƒ½æµ‹è¯•~~ (å·²å®Œæˆ)
3. âœ… ~~éªŒè¯CORSé…ç½®æ˜¯å¦ç”Ÿæ•ˆ~~ (å·²å®Œæˆ)
4. ğŸ”„ æµ‹è¯•æ•°æ®åº“è¿æ¥å’Œæ“ä½œ (è¿›è¡Œä¸­)
5. ğŸ”„ å®Œå–„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½• (è¿›è¡Œä¸­)
6. ğŸ“‹ ç¼–å†™å•å…ƒæµ‹è¯• (å¾…å¼€å§‹)
7. ğŸ“‹ è¿›è¡ŒAPIæ¥å£åŠŸèƒ½æµ‹è¯•
8. ğŸ“‹ éªŒè¯ä¸å‰ç«¯9418ç«¯å£çš„é›†æˆ
9. ğŸ“‹ æ€§èƒ½æµ‹è¯•å’Œä¼˜åŒ–

### 9. æ³¨æ„äº‹é¡¹
- ç¡®ä¿æ•°æ®åº“`users`è¡¨ç»“æ„ä¸Userå®ä½“ç±»åŒ¹é…
- æ£€æŸ¥æ•°æ®åº“è¿æ¥é…ç½®æ˜¯å¦æ­£ç¡®
- éªŒè¯9418ç«¯å£çš„å‰ç«¯åº”ç”¨èƒ½å¦æ­£å¸¸è°ƒç”¨API
- æ³¨æ„`User_sta`å­—æ®µçš„æ•°æ®ç±»å‹ï¼ˆBoolean/Integerï¼‰

---

**å®ç°æ—¶é—´**: 2024å¹´6æœˆ15æ—¥  
**æŠ€æœ¯æ ˆ**: Spring Boot 3.3.4 + MyBatis Plus + MySQL + Java 17  
**ç«¯å£**: 8082  
**CORSé™åˆ¶**: ä»…å…è®¸9418ç«¯å£è°ƒç”¨