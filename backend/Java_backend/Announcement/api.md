
---

## 📘 公告查询接口文档

### 1. 接口地址

```
GET /announcements
```

---

### 2. 接口说明

返回符合条件的公告列表。支持按管理员筛选、按数量限制、可见性过滤。默认返回所有可见公告，按时间倒序排列。

---

### 3. 请求参数（Query Parameters）

| 参数名      | 类型     | 是否必填 | 说明                     |
| -------- | ------ | ---- | ---------------------- |
| `rootId` | string | 否    | 管理员ID，若传入，仅返回该管理员发布的公告 |
| `n`      | int    | 否    | 返回最近的前 n 条公告           |

📌 说明：

* 两个参数都不填 → 返回所有可见公告
* 只填 `n` → 返回最近 n 条公告
* 只填 `rootId` → 返回该管理员的全部可见公告
* 同时填 → 返回该管理员的最近 n 条可见公告

---

### 4. 成功响应

#### HTTP 状态码：

```
200 OK
```

#### 响应体格式（JSON）：

```json
[
  {
    "announcementId": "A0001",
    "rootId": "R2023001",
    "createdAt": "2025-06-17T14:30:00",
    "content": "本周六进行系统维护，请注意。",
    "visibleStatus": false
  },
  ...
]
```

---

### 5. 失败响应（示例）

| 状态码 | 场景     | 示例响应                                     |
| --- | ------ | ---------------------------------------- |
| 500 | 后端服务异常 | `{ "message": "Internal Server Error" }` |

---

### 6. 示例调用

#### 6.1 获取所有公告（默认）：

```http
GET /announcements
```

#### 6.2 获取最近 5 条公告：

```http
GET /announcements?n=5
```

#### 6.3 获取某管理员的所有公告：

```http
GET /announcements?rootId=R20230123
```

#### 6.4 获取某管理员最近 3 条公告：

```http
GET /announcements?rootId=R20230123&n=3
```

---

### 7. 注意事项

* 所有公告结果默认按 `createdAt` 字段倒序排列；
* 返回的公告数据已自动过滤不可见（`visible_status = 1`）的数据；
* 请确保管理员 `rootId` 在系统中存在。

---
